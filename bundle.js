var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function a(t,e,n,r,o,i,a){const u=function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(e,r,o,i);if(u){const o=s(e,n,r,a);t.p(o,u)}}function u(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function p(){return g(" ")}function m(){return g("")}function v(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function $(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let k,M;function x(){if(void 0===k){k=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){k=!0}}return k}function S(t,e,n){t.classList[n?"add":"remove"](e)}function T(t){M=t}function D(){if(!M)throw new Error("Function called outside component initialization");return M}function z(t){D().$$.on_mount.push(t)}const q=[],C=[],j=[],N=[],U=Promise.resolve();let F=!1;function A(t){j.push(t)}let L=!1;const H=new Set;function Y(){if(!L){L=!0;do{for(let t=0;t<q.length;t+=1){const e=q[t];T(e),_(e.$$)}for(T(null),q.length=0;C.length;)C.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];H.has(e)||(H.add(e),e())}j.length=0}while(q.length);for(;N.length;)N.pop()();F=!1,L=!1,H.clear()}}function _(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const I=new Set;let E;function O(){E={r:0,c:[],p:E}}function R(){E.r||r(E.c),E=E.p}function P(t,e){t&&t.i&&(I.delete(t),t.i(e))}function B(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),E.c.push((()=>{I.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function W(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const a=t&&(e.current=t)(s);let u=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(O(),B(t,1,1,(()=>{e.blocks[n]=null})),R())})):e.block.d(1),a.c(),P(a,1),a.m(e.mount(),e.anchor),u=!0),e.block=a,e.blocks&&(e.blocks[r]=a),u&&Y()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=D();if(t.then((t=>{T(n),r(e.then,1,e.value,t),T(null)}),(t=>{if(T(n),r(e.catch,2,e.error,t),T(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}const V="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Z(t,e){B(t,1,1,(()=>{e.delete(t.key)}))}function X(t){t&&t.c()}function J(t,n,i){const{fragment:s,on_mount:a,on_destroy:u,after_update:c}=t.$$;s&&s.m(n,i),A((()=>{const n=a.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(A)}function Q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(q.push(t),F||(F=!0,U.then(Y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,o,i,s,a,u,c=[-1]){const f=M;T(e);const h=o.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let g=!1;if(d.ctx=i?i(e,h,((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),g&&G(e,t)),n})):[],d.update(),g=!0,r(d.before_update),d.fragment=!!s&&s(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(l)}else d.fragment&&d.fragment.c();o.intro&&P(e.$$.fragment),J(e,o.target,o.anchor),Y()}T(f)}class tt{$destroy(){Q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function et(t){return t&&parseFloat(t.delta.replace(",","."))}function nt(t){return t.replace(/^["\s]*|["\s]*$/g,"")}function rt(e){let n;return{c(){n=h("div"),n.innerHTML='<div class="dot-windmill svelte-lf86xz"></div>',w(n,"class","loader-parent svelte-lf86xz")},m(t,e){c(t,n,e)},p:t,i:t,o:t,d(t){t&&l(n)}}}class ot extends tt{constructor(t){super(),K(this,t,null,rt,i,{})}}function it(e){let n,r,o,i,s,a,f,d,m,y,$,k,M;return{c(){n=h("div"),r=h("form"),o=h("input"),i=p(),s=h("input"),a=p(),f=h("button"),d=g("Open"),y=p(),$=h("div"),$.innerHTML='This has to be a semicolon separated list of (Name, ISIN) for each stock that should be shown. <br/>\n          First line will be ignored. <a rel="download" href="stocks.csv">Download example</a> or <a href="?stocks=stocks.csv" target="_blank" rel="noopener noreferer">explore in action</a>.',w(o,"placeholder","Enter location of stocks.csv source"),w(o,"class","svelte-cj9l5u"),w(s,"type","hidden"),w(s,"name","stocks"),s.value=e[0],w(s,"class","svelte-cj9l5u"),w(f,"class","primary"),w(f,"type","submit"),f.disabled=m=!e[0],w($,"class","hint svelte-cj9l5u"),w(r,"method","get"),w(n,"class","notice svelte-cj9l5u")},m(t,l){c(t,n,l),u(n,r),u(r,o),b(o,e[0]),u(r,i),u(r,s),u(r,a),u(r,f),u(f,d),u(r,y),u(r,$),k||(M=v(o,"input",e[3]),k=!0)},p(t,e){1&e&&o.value!==t[0]&&b(o,t[0]),1&e&&(s.value=t[0]),1&e&&m!==(m=!t[0])&&(f.disabled=m)},i:t,o:t,d(t){t&&l(n),k=!1,M()}}}function st(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:ct,then:ut,catch:at,error:4,blocks:[,,,]};return W(n=t[1],o),{c(){e=m(),o.block.c()},m(t,n){c(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,n){{const r=(t=e).slice();r[4]=o.resolved,o.block.p(r,n)}},i(t){r||(P(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){B(o.blocks[t])}r=!1},d(t){t&&l(e),o.block.d(t),o.token=null,o=null}}}function at(e){let n,r,o,i=e[4].message+"";return{c(){n=h("p"),r=g("Could not load stocks: "),o=g(i),w(n,"class","error")},m(t,e){c(t,n,e),u(n,r),u(n,o)},p:t,i:t,o:t,d(t){t&&l(n)}}}function ut(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function ct(e){let n,r;return n=new ot({}),{c(){X(n.$$.fragment)},m(t,e){J(n,t,e),r=!0},p:t,i(t){r||(P(n.$$.fragment,t),r=!0)},o(t){B(n.$$.fragment,t),r=!1},d(t){Q(n,t)}}}function lt(t){let e,n,r,o;const i=[st,it],s=[];return n=function(t,e){return t[1]?0:1}(t),r=s[n]=i[n](t),{c(){e=h("div"),r.c(),w(e,"class","stocks-loader svelte-cj9l5u")},m(t,r){c(t,e,r),s[n].m(e,null),o=!0},p(t,[e]){r.p(t,e)},i(t){o||(P(r),o=!0)},o(t){B(r),o=!1},d(t){t&&l(e),s[n].d()}}}function ft(t,e,n){let{onStocksLoaded:r}=e,{stocksURL:o}={stocksURL:new URL(window.location.href).searchParams.get("stocks")},i=o&&(s=o,fetch(s).then((t=>t.text())).then((t=>{const e=t.split("\n");return e.slice(1,e.length).map((t=>{const[e,n]=t.split(";");return e&&n?{name:nt(e),isin:nt(n)}:null})).filter((t=>t))}))).then(r);var s;return t.$$set=t=>{"onStocksLoaded"in t&&n(2,r=t.onStocksLoaded)},[o,i,r,function(){o=this.value,n(0,o)}]}class ht extends tt{constructor(t){super(),K(this,t,ft,lt,i,{onStocksLoaded:2})}}function dt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gt(t){let e=t,n=t;function r(t,e,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const i=r+o>>>1;n(t[i],e)<0?r=i+1:o=i}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>dt(t(e),n)}(t)),{left:r,center:function(t,n,o,i){null==o&&(o=0),null==i&&(i=t.length);const s=r(t,n,o,i-1);return s>o&&e(t[s-1],n)>-e(t[s],n)?s-1:s},right:function(t,e,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const i=r+o>>>1;n(t[i],e)>0?o=i:r=i+1}return r}}}const pt=gt(dt).right;gt((function(t){return null===t?NaN:+t})).center;var mt=Math.sqrt(50),vt=Math.sqrt(10),wt=Math.sqrt(2);function yt(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=mt?10:i>=vt?5:i>=wt?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=mt?10:i>=vt?5:i>=wt?2:1)}function bt(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return i>=mt?o*=10:i>=vt?o*=5:i>=wt&&(o*=2),e<t?-o:o}function $t(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function kt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Mt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xt(){}var St=.7,Tt=1/St,Dt="\\s*([+-]?\\d+)\\s*",zt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",qt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ct=/^#([0-9a-f]{3,8})$/,jt=new RegExp("^rgb\\("+[Dt,Dt,Dt]+"\\)$"),Nt=new RegExp("^rgb\\("+[qt,qt,qt]+"\\)$"),Ut=new RegExp("^rgba\\("+[Dt,Dt,Dt,zt]+"\\)$"),Ft=new RegExp("^rgba\\("+[qt,qt,qt,zt]+"\\)$"),At=new RegExp("^hsl\\("+[zt,qt,qt]+"\\)$"),Lt=new RegExp("^hsla\\("+[zt,qt,qt,zt]+"\\)$"),Ht={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yt(){return this.rgb().formatHex()}function _t(){return this.rgb().formatRgb()}function It(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ct.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Et(e):3===n?new Bt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ot(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ot(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=jt.exec(t))?new Bt(e[1],e[2],e[3],1):(e=Nt.exec(t))?new Bt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ut.exec(t))?Ot(e[1],e[2],e[3],e[4]):(e=Ft.exec(t))?Ot(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=At.exec(t))?Xt(e[1],e[2]/100,e[3]/100,1):(e=Lt.exec(t))?Xt(e[1],e[2]/100,e[3]/100,e[4]):Ht.hasOwnProperty(t)?Et(Ht[t]):"transparent"===t?new Bt(NaN,NaN,NaN,0):null}function Et(t){return new Bt(t>>16&255,t>>8&255,255&t,1)}function Ot(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bt(t,e,n,r)}function Rt(t){return t instanceof xt||(t=It(t)),t?new Bt((t=t.rgb()).r,t.g,t.b,t.opacity):new Bt}function Pt(t,e,n,r){return 1===arguments.length?Rt(t):new Bt(t,e,n,null==r?1:r)}function Bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Wt(){return"#"+Zt(this.r)+Zt(this.g)+Zt(this.b)}function Vt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Zt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Xt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qt(t,e,n,r)}function Jt(t){if(t instanceof Qt)return new Qt(t.h,t.s,t.l,t.opacity);if(t instanceof xt||(t=It(t)),!t)return new Qt;if(t instanceof Qt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,a=i-o,u=(i+o)/2;return a?(s=e===i?(n-r)/a+6*(n<r):n===i?(r-e)/a+2:(e-n)/a+4,a/=u<.5?i+o:2-i-o,s*=60):a=u>0&&u<1?0:s,new Qt(s,a,u,t.opacity)}function Qt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Gt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}kt(xt,It,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Yt,formatHex:Yt,formatHsl:function(){return Jt(this).formatHsl()},formatRgb:_t,toString:_t}),kt(Bt,Pt,Mt(xt,{brighter:function(t){return t=null==t?Tt:Math.pow(Tt,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?St:Math.pow(St,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wt,formatHex:Wt,formatRgb:Vt,toString:Vt})),kt(Qt,(function(t,e,n,r){return 1===arguments.length?Jt(t):new Qt(t,e,n,null==r?1:r)}),Mt(xt,{brighter:function(t){return t=null==t?Tt:Math.pow(Tt,t),new Qt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?St:Math.pow(St,t),new Qt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Bt(Gt(t>=240?t-240:t+120,o,r),Gt(t,o,r),Gt(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Kt=t=>()=>t;function te(t){return 1==(t=+t)?ee:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Kt(isNaN(e)?n:e)}}function ee(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Kt(isNaN(t)?e:t)}var ne=function t(e){var n=te(e);function r(t,e){var r=n((t=Pt(t)).r,(e=Pt(e)).r),o=n(t.g,e.g),i=n(t.b,e.b),s=ee(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=i(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function re(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,o=e.slice();return function(i){for(n=0;n<r;++n)o[n]=t[n]*(1-i)+e[n]*i;return o}}function oe(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),s=new Array(r);for(n=0;n<o;++n)i[n]=fe(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=i[n](t);return s}}function ie(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function se(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ae(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=fe(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}var ue=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ce=new RegExp(ue.source,"g");function le(t,e){var n,r,o,i=ue.lastIndex=ce.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=ue.exec(t))&&(r=ce.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:se(n,r)})),i=ce.lastIndex;return i<e.length&&(o=e.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function fe(t,e){var n,r,o=typeof e;return null==e||"boolean"===o?Kt(e):("number"===o?se:"string"===o?(n=It(e))?(e=n,ne):le:e instanceof It?ne:e instanceof Date?ie:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?oe:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ae:se:re))(t,e)}function he(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function de(t){return+t}var ge=[0,1];function pe(t){return t}function me(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function ve(t,e,n){var r=t[0],o=t[1],i=e[0],s=e[1];return o<r?(r=me(o,r),i=n(s,i)):(r=me(r,o),i=n(i,s)),function(t){return i(r(t))}}function we(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),i=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)o[s]=me(t[s],t[s+1]),i[s]=n(e[s],e[s+1]);return function(e){var n=pt(t,e,1,r)-1;return i[n](o[n](e))}}function ye(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function be(){var t,e,n,r,o,i,s=ge,a=ge,u=fe,c=pe;function l(){var t,e,n,u=Math.min(s.length,a.length);return c!==pe&&(t=s[0],e=s[u-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=u>2?we:ve,o=i=null,f}function f(e){return isNaN(e=+e)?n:(o||(o=r(s.map(t),a,u)))(t(c(e)))}return f.invert=function(n){return c(e((i||(i=r(a,s.map(t),se)))(n)))},f.domain=function(t){return arguments.length?(s=Array.from(t,de),l()):s.slice()},f.range=function(t){return arguments.length?(a=Array.from(t),l()):a.slice()},f.rangeRound=function(t){return a=Array.from(t),u=he,l()},f.clamp=function(t){return arguments.length?(c=!!t||pe,l()):c!==pe},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function $e(){return be()(pe,pe)}function ke(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Me(t){return(t=ke(Math.abs(t)))?t[1]:NaN}var xe,Se=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Te(t){if(!(e=Se.exec(t)))throw new Error("invalid format: "+t);var e;return new De({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function De(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function ze(t,e){var n=ke(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}Te.prototype=De.prototype,De.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var qe={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ze(100*t,e),r:ze,s:function(t,e){var n=ke(t,e);if(!n)return t+"";var r=n[0],o=n[1],i=o-(xe=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=r.length;return i===s?r:i>s?r+new Array(i-s+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+ke(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ce(t){return t}var je,Ne,Ue,Fe=Array.prototype.map,Ae=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Le(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Ce:(e=Fe.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var o=t.length,i=[],s=0,a=e[0],u=0;o>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),i.push(t.substring(o-=a,o+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return i.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Ce:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Fe.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Te(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,g=t.width,p=t.comma,m=t.precision,v=t.trim,w=t.type;"n"===w?(p=!0,w="g"):qe[w]||(void 0===m&&(m=12),v=!0,w="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var y="$"===h?o:"#"===h&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",b="$"===h?i:/[%p]/.test(w)?u:"",$=qe[w],k=/[defgprs%]/.test(w);function M(t){var o,i,u,h=y,M=b;if("c"===w)M=$(t)+M,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:$(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,r=1,o=-1;r<n;++r)switch(t[r]){case".":o=e=r;break;case"0":0===o&&(o=r),e=r;break;default:if(!+t[r])break t;o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t}(t)),x&&0==+t&&"+"!==f&&(x=!1),h=(x?"("===f?f:c:"-"===f||"("===f?"":f)+h,M=("s"===w?Ae[8+xe/3]:"")+M+(x&&"("===f?")":""),k)for(o=-1,i=t.length;++o<i;)if(48>(u=t.charCodeAt(o))||u>57){M=(46===u?s+t.slice(o+1):t.slice(o))+M,t=t.slice(0,o);break}}p&&!d&&(t=r(t,1/0));var S=h.length+t.length+M.length,T=S<g?new Array(g-S+1).join(e):"";switch(p&&d&&(t=r(T+t,T.length?g-M.length:1/0),T=""),n){case"<":t=h+t+M+T;break;case"=":t=h+T+t+M;break;case"^":t=T.slice(0,S=T.length>>1)+h+t+M+T.slice(S);break;default:t=T+h+t+M}return a(t)}return m=void 0===m?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),M.toString=function(){return t+""},M}return{format:f,formatPrefix:function(t,e){var n=f(((t=Te(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Me(e)/3))),o=Math.pow(10,-r),i=Ae[8+r/3];return function(t){return n(o*t)+i}}}}function He(t,e,n,r){var o,i=bt(t,e,n);switch((r=Te(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Me(e)/3)))-Me(Math.abs(t)))}(i,s))||(r.precision=o),Ue(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Me(e)-Me(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(t){return Math.max(0,-Me(Math.abs(t)))}(i))||(r.precision=o-2*("%"===r.type))}return Ne(r)}function Ye(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,o,i,s,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(s=yt(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),i=new Array(o=Math.ceil(e-t+1));++a<o;)i[a]=(t+a)*s;else for(s=-s,t=Math.ceil(t*s),e=Math.floor(e*s),i=new Array(o=Math.ceil(e-t+1));++a<o;)i[a]=(t+a)/s;return r&&i.reverse(),i}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return He(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,o,i=e(),s=0,a=i.length-1,u=i[s],c=i[a],l=10;for(c<u&&(o=u,u=c,c=o,o=s,s=a,a=o);l-- >0;){if((o=yt(u,c,n))===r)return i[s]=u,i[a]=c,e(i);if(o>0)u=Math.floor(u/o)*o,c=Math.ceil(c/o)*o;else{if(!(o<0))break;u=Math.ceil(u*o)/o,c=Math.floor(c*o)/o}r=o}return t},t}function _e(){var t=$e();return t.copy=function(){return ye(t,_e())},$t.apply(t,arguments),Ye(t)}je=Le({thousands:",",grouping:[3],currency:["$",""]}),Ne=je.format,Ue=je.formatPrefix;var Ie=new Date,Ee=new Date;function Oe(t,e,n,r){function o(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return o.floor=function(e){return t(e=new Date(+e)),e},o.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},o.round=function(t){var e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},o.range=function(n,r,i){var s,a=[];if(n=o.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(s=new Date(+n)),e(n,i),t(n)}while(s<n&&n<r);return a},o.filter=function(n){return Oe((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(o.count=function(e,r){return Ie.setTime(+e),Ee.setTime(+r),t(Ie),t(Ee),Math.floor(n(Ie,Ee))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(r?function(e){return r(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var Re=Oe((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Re.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Oe((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Re:null};var Pe=1e3,Be=6e4,We=36e5,Ve=864e5,Ze=6048e5,Xe=Oe((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Pe)}),(function(t,e){return(e-t)/Pe}),(function(t){return t.getUTCSeconds()})),Je=Oe((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pe)}),(function(t,e){t.setTime(+t+e*Be)}),(function(t,e){return(e-t)/Be}),(function(t){return t.getMinutes()})),Qe=Oe((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pe-t.getMinutes()*Be)}),(function(t,e){t.setTime(+t+e*We)}),(function(t,e){return(e-t)/We}),(function(t){return t.getHours()})),Ge=Oe((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Be)/Ve),(t=>t.getDate()-1));function Ke(t){return Oe((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Be)/Ze}))}var tn=Ke(0),en=Ke(1),nn=(Ke(2),Ke(3),Ke(4)),rn=(Ke(5),Ke(6),Oe((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),on=Oe((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));on.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Oe((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var sn=Oe((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Ve}),(function(t){return t.getUTCDate()-1}));function an(t){return Oe((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Ze}))}var un=an(0),cn=an(1),ln=(an(2),an(3),an(4)),fn=(an(5),an(6),Oe((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function hn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function dn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function gn(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}fn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Oe((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var pn,mn,vn={"-":"",_:" ",0:"0"},wn=/^\s*\d+/,yn=/^%/,bn=/[\\^$*+?|[\]().{}]/g;function $n(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(e)+o:o)}function kn(t){return t.replace(bn,"\\$&")}function Mn(t){return new RegExp("^(?:"+t.map(kn).join("|")+")","i")}function xn(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Sn(t,e,n){var r=wn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Tn(t,e,n){var r=wn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Dn(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function zn(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function qn(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Cn(t,e,n){var r=wn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function jn(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Nn(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Un(t,e,n){var r=wn.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Fn(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function An(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ln(t,e,n){var r=wn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Hn(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Yn(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function _n(t,e,n){var r=wn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function In(t,e,n){var r=wn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function En(t,e,n){var r=wn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function On(t,e,n){var r=yn.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Rn(t,e,n){var r=wn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Pn(t,e,n){var r=wn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Bn(t,e){return $n(t.getDate(),e,2)}function Wn(t,e){return $n(t.getHours(),e,2)}function Vn(t,e){return $n(t.getHours()%12||12,e,2)}function Zn(t,e){return $n(1+Ge.count(on(t),t),e,3)}function Xn(t,e){return $n(t.getMilliseconds(),e,3)}function Jn(t,e){return Xn(t,e)+"000"}function Qn(t,e){return $n(t.getMonth()+1,e,2)}function Gn(t,e){return $n(t.getMinutes(),e,2)}function Kn(t,e){return $n(t.getSeconds(),e,2)}function tr(t){var e=t.getDay();return 0===e?7:e}function er(t,e){return $n(tn.count(on(t)-1,t),e,2)}function nr(t){var e=t.getDay();return e>=4||0===e?nn(t):nn.ceil(t)}function rr(t,e){return t=nr(t),$n(nn.count(on(t),t)+(4===on(t).getDay()),e,2)}function or(t){return t.getDay()}function ir(t,e){return $n(en.count(on(t)-1,t),e,2)}function sr(t,e){return $n(t.getFullYear()%100,e,2)}function ar(t,e){return $n((t=nr(t)).getFullYear()%100,e,2)}function ur(t,e){return $n(t.getFullYear()%1e4,e,4)}function cr(t,e){var n=t.getDay();return $n((t=n>=4||0===n?nn(t):nn.ceil(t)).getFullYear()%1e4,e,4)}function lr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$n(e/60|0,"0",2)+$n(e%60,"0",2)}function fr(t,e){return $n(t.getUTCDate(),e,2)}function hr(t,e){return $n(t.getUTCHours(),e,2)}function dr(t,e){return $n(t.getUTCHours()%12||12,e,2)}function gr(t,e){return $n(1+sn.count(fn(t),t),e,3)}function pr(t,e){return $n(t.getUTCMilliseconds(),e,3)}function mr(t,e){return pr(t,e)+"000"}function vr(t,e){return $n(t.getUTCMonth()+1,e,2)}function wr(t,e){return $n(t.getUTCMinutes(),e,2)}function yr(t,e){return $n(t.getUTCSeconds(),e,2)}function br(t){var e=t.getUTCDay();return 0===e?7:e}function $r(t,e){return $n(un.count(fn(t)-1,t),e,2)}function kr(t){var e=t.getUTCDay();return e>=4||0===e?ln(t):ln.ceil(t)}function Mr(t,e){return t=kr(t),$n(ln.count(fn(t),t)+(4===fn(t).getUTCDay()),e,2)}function xr(t){return t.getUTCDay()}function Sr(t,e){return $n(cn.count(fn(t)-1,t),e,2)}function Tr(t,e){return $n(t.getUTCFullYear()%100,e,2)}function Dr(t,e){return $n((t=kr(t)).getUTCFullYear()%100,e,2)}function zr(t,e){return $n(t.getUTCFullYear()%1e4,e,4)}function qr(t,e){var n=t.getUTCDay();return $n((t=n>=4||0===n?ln(t):ln.ceil(t)).getUTCFullYear()%1e4,e,4)}function Cr(){return"+0000"}function jr(){return"%"}function Nr(t){return+t}function Ur(t){return Math.floor(+t/1e3)}!function(t){pn=function(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,i=t.days,s=t.shortDays,a=t.months,u=t.shortMonths,c=Mn(o),l=xn(o),f=Mn(i),h=xn(i),d=Mn(s),g=xn(s),p=Mn(a),m=xn(a),v=Mn(u),w=xn(u),y={a:function(t){return s[t.getDay()]},A:function(t){return i[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Bn,e:Bn,f:Jn,g:ar,G:cr,H:Wn,I:Vn,j:Zn,L:Xn,m:Qn,M:Gn,p:function(t){return o[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Nr,s:Ur,S:Kn,u:tr,U:er,V:rr,w:or,W:ir,x:null,X:null,y:sr,Y:ur,Z:lr,"%":jr},b={a:function(t){return s[t.getUTCDay()]},A:function(t){return i[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:fr,e:fr,f:mr,g:Dr,G:qr,H:hr,I:dr,j:gr,L:pr,m:vr,M:wr,p:function(t){return o[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Nr,s:Ur,S:yr,u:br,U:$r,V:Mr,w:xr,W:Sr,x:null,X:null,y:Tr,Y:zr,Z:Cr,"%":jr},$={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=w.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return x(t,e,n,r)},d:An,e:An,f:En,g:jn,G:Cn,H:Hn,I:Hn,j:Ln,L:In,m:Fn,M:Yn,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:Un,Q:Rn,s:Pn,S:_n,u:Tn,U:Dn,V:zn,w:Sn,W:qn,x:function(t,e,r){return x(t,n,e,r)},X:function(t,e,n){return x(t,r,e,n)},y:jn,Y:Cn,Z:Nn,"%":On};function k(t,e){return function(n){var r,o,i,s=[],a=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(o=vn[r=t.charAt(++a)])?r=t.charAt(++a):o="e"===r?" ":"0",(i=e[r])&&(r=i(n,o)),s.push(r),u=a+1);return s.push(t.slice(u,a)),s.join("")}}function M(t,e){return function(n){var r,o,i=gn(1900,void 0,1);if(x(i,t,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(e&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(o=(r=dn(gn(i.y,0,1))).getUTCDay(),r=o>4||0===o?cn.ceil(r):cn(r),r=sn.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(o=(r=hn(gn(i.y,0,1))).getDay(),r=o>4||0===o?en.ceil(r):en(r),r=Ge.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),o="Z"in i?dn(gn(i.y,0,1)).getUTCDay():hn(gn(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,dn(i)):hn(i)}}function x(t,e,n,r){for(var o,i,s=0,a=e.length,u=n.length;s<a;){if(r>=u)return-1;if(37===(o=e.charCodeAt(s++))){if(o=e.charAt(s++),!(i=$[o in vn?e.charAt(s++):o])||(r=i(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return y.x=k(n,y),y.X=k(r,y),y.c=k(e,y),b.x=k(n,b),b.X=k(r,b),b.c=k(e,b),{format:function(t){var e=k(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=k(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}(t),mn=pn.format,pn.parse,pn.utcFormat,pn.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Fr=1e3,Ar=6e4,Lr=36e5,Hr=864e5,Yr=2592e6,_r=31536e6;function Ir(t){return new Date(t)}function Er(t){return t instanceof Date?+t:+new Date(+t)}function Or(t,e,n,r,o,i,s,a,u){var c=$e(),l=c.invert,f=c.domain,h=u(".%L"),d=u(":%S"),g=u("%I:%M"),p=u("%I %p"),m=u("%a %d"),v=u("%b %d"),w=u("%B"),y=u("%Y"),b=[[s,1,Fr],[s,5,5e3],[s,15,15e3],[s,30,3e4],[i,1,Ar],[i,5,3e5],[i,15,9e5],[i,30,18e5],[o,1,Lr],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,Hr],[r,2,1728e5],[n,1,6048e5],[e,1,Yr],[e,3,7776e6],[t,1,_r]];function $(a){return(s(a)<a?h:i(a)<a?d:o(a)<a?g:r(a)<a?p:e(a)<a?n(a)<a?m:v:t(a)<a?w:y)(a)}function k(e,n,r){if(null==e&&(e=10),"number"==typeof e){var o,i=Math.abs(r-n)/e,s=gt((function(t){return t[2]})).right(b,i);return s===b.length?(o=bt(n/_r,r/_r,e),e=t):s?(o=(s=b[i/b[s-1][2]<b[s][2]/i?s-1:s])[1],e=s[0]):(o=Math.max(bt(n,r,e),1),e=a),e.every(o)}return e}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?f(Array.from(t,Er)):f().map(Ir)},c.ticks=function(t){var e,n=f(),r=n[0],o=n[n.length-1],i=o<r;return i&&(e=r,r=o,o=e),e=(e=k(t,r,o))?e.range(r,o+1):[],i?e.reverse():e},c.tickFormat=function(t,e){return null==e?$:u(e)},c.nice=function(t){var e=f();return(t=k(t,e[0],e[e.length-1]))?f(function(t,e){var n,r=0,o=(t=t.slice()).length-1,i=t[r],s=t[o];return s<i&&(n=r,r=o,o=n,n=i,i=s,s=n),t[r]=e.floor(i),t[o]=e.ceil(s),t}(e,t)):c},c.copy=function(){return ye(c,Or(t,e,n,r,o,i,s,a,u))},c}function Rr(t,e,n){const r=t.slice();return r[25]=e[n],r[27]=n,r}function Pr(t,e,n){const r=t.slice();return r[25]=e[n],r}function Br(t){let e,n,r,o,i,s,a,f,h,p,m,v=t[11](t[25])+"";return{c(){e=d("g"),n=d("line"),i=d("line"),f=d("text"),h=g(v),w(n,"class","line svelte-4z3vc9"),w(n,"x1",r=t[4].left),w(n,"x2",o=t[4].right),w(i,"class","legend svelte-4z3vc9"),w(i,"x1",s=t[4].left-3),w(i,"x2",a=t[4].left),w(f,"y","4"),w(f,"x",p=t[4].left-6),w(f,"class","svelte-4z3vc9"),w(e,"class","tick svelte-4z3vc9"),w(e,"transform",m="translate(0, "+(t[4].top+t[7](t[25])*t[4].height)+")")},m(t,r){c(t,e,r),u(e,n),u(e,i),u(e,f),u(f,h)},p(t,u){16&u&&r!==(r=t[4].left)&&w(n,"x1",r),16&u&&o!==(o=t[4].right)&&w(n,"x2",o),16&u&&s!==(s=t[4].left-3)&&w(i,"x1",s),16&u&&a!==(a=t[4].left)&&w(i,"x2",a),2560&u&&v!==(v=t[11](t[25])+"")&&y(h,v),16&u&&p!==(p=t[4].left-6)&&w(f,"x",p),656&u&&m!==(m="translate(0, "+(t[4].top+t[7](t[25])*t[4].height)+")")&&w(e,"transform",m)},d(t){t&&l(e)}}}function Wr(t){let e,n,r,o,i;function s(t,e){return t[5]?Zr:((null==o||320&e)&&(o=!!(t[8].length-1!==t[27]&&t[6](t[8][t[27]+1])-t[6](t[25])>0)),o?Vr:void 0)}let a=s(t,-1),u=a&&a(t);return{c(){e=d("line"),u&&u.c(),i=m(),w(e,"class","line svelte-4z3vc9"),w(e,"y1",n=t[4].top),w(e,"y2",r=t[4].bottom)},m(t,n){c(t,e,n),u&&u.m(t,n),c(t,i,n)},p(t,o){16&o&&n!==(n=t[4].top)&&w(e,"y1",n),16&o&&r!==(r=t[4].bottom)&&w(e,"y2",r),a===(a=s(t,o))&&u?u.p(t,o):(u&&u.d(1),u=a&&a(t),u&&(u.c(),u.m(i.parentNode,i)))},d(t){t&&l(e),u&&u.d(t),t&&l(i)}}}function Vr(t){let e,n,r,o,i=t[10](t[25])+"";return{c(){e=d("text"),n=g(i),w(e,"x",r=(t[6](t[8][t[27]+1])-t[6](t[25]))/2*t[4].width),w(e,"y",o=t[4].bottom+15),w(e,"class","svelte-4z3vc9")},m(t,r){c(t,e,r),u(e,n)},p(t,s){1280&s&&i!==(i=t[10](t[25])+"")&&y(n,i),336&s&&r!==(r=(t[6](t[8][t[27]+1])-t[6](t[25]))/2*t[4].width)&&w(e,"x",r),16&s&&o!==(o=t[4].bottom+15)&&w(e,"y",o)},d(t){t&&l(e)}}}function Zr(t){let e,n,r,o,i,s,a=t[10](t[25])+"";return{c(){e=d("line"),o=d("text"),i=g(a),w(e,"class","legend svelte-4z3vc9"),w(e,"y1",n=t[4].bottom),w(e,"y2",r=t[4].bottom+3),w(o,"y",s=t[4].bottom+15),w(o,"class","svelte-4z3vc9")},m(t,n){c(t,e,n),c(t,o,n),u(o,i)},p(t,u){16&u&&n!==(n=t[4].bottom)&&w(e,"y1",n),16&u&&r!==(r=t[4].bottom+3)&&w(e,"y2",r),1280&u&&a!==(a=t[10](t[25])+"")&&y(i,a),16&u&&s!==(s=t[4].bottom+15)&&w(o,"y",s)},d(t){t&&l(e),t&&l(o)}}}function Xr(t){let e,n,r=eo(t[8],t[25],t[27],t[0]),o=r&&Wr(t);return{c(){e=d("g"),o&&o.c(),w(e,"class","tick svelte-4z3vc9"),w(e,"transform",n="translate("+(t[4].left+t[6](t[25])*t[4].width)+", 0)")},m(t,n){c(t,e,n),o&&o.m(e,null)},p(t,i){257&i&&(r=eo(t[8],t[25],t[27],t[0])),r?o?o.p(t,i):(o=Wr(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null),336&i&&n!==(n="translate("+(t[4].left+t[6](t[25])*t[4].width)+", 0)")&&w(e,"transform",n)},d(t){t&&l(e),o&&o.d()}}}function Jr(e){let n,r,o,i,s,a,g,p,m,y,b,$=e[9],k=[];for(let t=0;t<$.length;t+=1)k[t]=Br(Pr(e,$,t));let M=e[8],S=[];for(let t=0;t<M.length;t+=1)S[t]=Xr(Rr(e,M,t));return{c(){n=h("div"),r=d("svg"),o=d("g");for(let t=0;t<k.length;t+=1)k[t].c();i=d("g");for(let t=0;t<S.length;t+=1)S[t].c();s=d("g"),a=d("path"),p=d("g"),m=d("path"),w(o,"class","axis y-axis svelte-4z3vc9"),w(i,"class","axis x-axis svelte-4z3vc9"),w(a,"class","pbox svelte-4z3vc9"),w(a,"d",g="M"+e[4].left+","+e[4].top+"H"+e[4].right+"V"+e[4].bottom+"H"+e[4].left+"Z"),w(s,"class","box svelte-4z3vc9"),w(m,"class","path-line svelte-4z3vc9"),w(m,"d",e[12]),w(p,"class","graph svelte-4z3vc9"),w(p,"transform",y="translate("+e[4].left+", "+e[4].top+")"),w(r,"style",e[1]),w(r,"class","svelte-4z3vc9"),w(n,"class","chart svelte-4z3vc9"),A((()=>e[14].call(n)))},m(t,f){c(t,n,f),u(n,r),u(r,o);for(let t=0;t<k.length;t+=1)k[t].m(o,null);u(r,i);for(let t=0;t<S.length;t+=1)S[t].m(i,null);u(r,s),u(s,a),u(r,p),u(p,m),b=function(t,e){const n=getComputedStyle(t),r=(parseInt(n.zIndex)||0)-1;"static"===n.position&&(t.style.position="relative");const o=h("iframe");o.setAttribute("style",`display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${r};`),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const i=x();let s;return i?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=v(window,"message",(t=>{t.source===o.contentWindow&&e()}))):(o.src="about:blank",o.onload=()=>{s=v(o.contentWindow,"resize",e)}),u(t,o),()=>{(i||s&&o.contentWindow)&&s(),l(o)}}(n,e[14].bind(n))},p(t,[e]){if(2704&e){let n;for($=t[9],n=0;n<$.length;n+=1){const r=Pr(t,$,n);k[n]?k[n].p(r,e):(k[n]=Br(r),k[n].c(),k[n].m(o,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=$.length}if(1393&e){let n;for(M=t[8],n=0;n<M.length;n+=1){const r=Rr(t,M,n);S[n]?S[n].p(r,e):(S[n]=Xr(r),S[n].c(),S[n].m(i,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=M.length}16&e&&g!==(g="M"+t[4].left+","+t[4].top+"H"+t[4].right+"V"+t[4].bottom+"H"+t[4].left+"Z")&&w(a,"d",g),4096&e&&w(m,"d",t[12]),16&e&&y!==(y="translate("+t[4].left+", "+t[4].top+")")&&w(p,"transform",y),2&e&&w(r,"style",t[1])},i:t,o:t,d(t){t&&l(n),f(k,t),f(S,t),b()}}}function Qr(t){return new Date(t.time)}function Gr(t){return parseFloat(t.last)}function Kr(t){return(t=new Date(t.getTime())).setHours(8,0,0,0),t}function to(t){return(t=new Date(t.getTime())).setHours(22,0,0,0),t}function eo(t,e,n,r){return"intraday"!==r||n%2==0}function no(t,e,n){const r=5,o=25,i=20,s=40;let{period:a}=e,{data:u}=e,{svgStyle:c=""}=e,l=500,f=200;const h={intraday:!0,week:!1,month:!0,month6:!1,year:!1},d={intraday:"%H:%M",week:"%a",month:"%d.%m",__default:"%b"};let g,p,m,v,w,y,b,$,k,M,x,S,T,D,z,q;return t.$$set=t=>{"period"in t&&n(0,a=t.period),"data"in t&&n(13,u=t.data),"svgStyle"in t&&n(1,c=t.svgStyle)},t.$$.update=()=>{12&t.$$.dirty&&n(4,g={left:s,right:l-o,top:r,bottom:f-i,width:l-s-o,height:f-r-i}),8192&t.$$.dirty&&n(15,p=u.values),32768&t.$$.dirty&&n(16,m=p.map(Qr)),32768&t.$$.dirty&&n(17,v=p.map(Gr).filter((t=>!isNaN(t)))),131072&t.$$.dirty&&n(18,w=Math.max.apply(null,v)),131072&t.$$.dirty&&n(19,y=Math.min.apply(null,v)),65536&t.$$.dirty&&n(20,b=m.reduce(((t,e,n)=>{let{currentRange:r}=t;return r&&e.getDay()!==r[0].getDay()&&(r=t.currentRange=null),r||(r=t.currentRange=[Kr(e),to(e)],t.ranges.push(r)),t}),{ranges:[],currentRange:null}).ranges.flat()),1048576&t.$$.dirty&&n(21,$=b.reduce(((t,e,n)=>{const r=b.length/2,o=Math.trunc(n/2),i=n%2==0?o/r:(o+1)/r;return t.push(i),t}),[]).flat()),1&t.$$.dirty&&n(5,k=h[a]),3145728&t.$$.dirty&&n(6,M=function(){return $t.apply(Or(on,rn,tn,Ge,Qe,Je,Xe,Re,mn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain(b).range($).nice()),786432&t.$$.dirty&&n(7,x=_e().domain([w+(w-y)/50,y-(w-y)/50]).nice()),65&t.$$.dirty&&n(8,S=M.ticks(function(t){return{intraday:9,week:8,month:4,month6:8,year:6}[t]}(a))),128&t.$$.dirty&&n(9,T=x.ticks(5)),321&t.$$.dirty&&n(10,D=M.tickFormat(S.length,d[a]||d.__default)),128&t.$$.dirty&&n(11,z=x.tickFormat()),32976&t.$$.dirty&&n(12,q=p.reduce(((t,e)=>{const n=Qr(e),r=Gr(e),o=t[t.length-1],i=isNaN(r)?[]:[o&&o.length?"L":"M",M(n)*g.width,",",x(r)*g.height];return t.push(i),t}),[]).flat().join(""))},[a,c,l,f,g,k,M,x,S,T,D,z,q,u,function(){l=this.clientWidth,f=this.clientHeight,n(2,l),n(3,f)}]}class ro extends tt{constructor(t){super(),K(this,t,no,Jr,i,{period:0,data:13,svgStyle:1})}}function oo(e){let n,r,o,i=e[10].message+"";return{c(){n=h("p"),r=g("Could not load chart: "),o=g(i),w(n,"class","error svelte-ahfyb7")},m(t,e){c(t,n,e),u(n,r),u(n,o)},p(t,e){2&e&&i!==(i=t[10].message+"")&&y(o,i)},i:t,o:t,d(t){t&&l(n)}}}function io(t){let e,n;return e=new ro({props:{data:t[9],period:t[0],svgStyle:"var(--chart-height)"}}),{c(){X(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.data=t[9]),1&n&&(r.period=t[0]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function so(e){let n,r,o;return r=new ot({}),{c(){n=h("div"),X(r.$$.fragment),w(n,"class","loader svelte-ahfyb7")},m(t,e){c(t,n,e),J(r,n,null),o=!0},p:t,i(t){o||(P(r.$$.fragment,t),o=!0)},o(t){B(r.$$.fragment,t),o=!1},d(t){t&&l(n),Q(r)}}}function ao(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:so,then:io,catch:oo,value:9,error:10,blocks:[,,,]};return W(n=t[1],o),{c(){e=m(),o.block.c()},m(t,n){c(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,[r]){if(t=e,o.ctx=t,2&r&&n!==(n=t[1])&&W(n,o));else{const e=t.slice();e[9]=e[10]=o.resolved,o.block.p(e,r)}},i(t){r||(P(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){B(o.blocks[t])}r=!1},d(t){t&&l(e),o.block.d(t),o.token=null,o=null}}}function uo(t,e,n){let{isin:r}=e,{period:o}=e,{now:i}=e,{quotesService:s}=e,{end:a}=e;const u={intraday:"intraday",woche:"week",monat:"month",monat6:"month6",jahr:"year"};let c,l;return t.$$set=t=>{"isin"in t&&n(2,r=t.isin),"period"in t&&n(3,o=t.period),"now"in t&&n(4,i=t.now),"quotesService"in t&&n(5,s=t.quotesService),"end"in t&&n(6,a=t.end)},t.$$.update=()=>{8&t.$$.dirty&&n(0,c=u[o]),85&t.$$.dirty&&n(1,l=function(t,e,n,r){return fetch(`${s}/stats/${t}?period=${e}&end=${n.toISOString()}&now=${r}`).then((t=>t.json()))}(r,c,a,i))},[c,l,r,o,i,s,a]}class co extends tt{constructor(t){super(),K(this,t,uo,ao,i,{isin:2,period:3,now:4,quotesService:5,end:6})}}function lo(e){let n,r;return{c(){n=h("img"),n.src!==(r="https://www.tradegate.de/images/charts/"+e[1]+"/"+e[0]+".png?"+e[2])&&w(n,"src",r),w(n,"class","svelte-tummfp")},m(t,e){c(t,n,e)},p(t,[e]){7&e&&n.src!==(r="https://www.tradegate.de/images/charts/"+t[1]+"/"+t[0]+".png?"+t[2])&&w(n,"src",r)},i:t,o:t,d(t){t&&l(n)}}}function fo(t,e,n){let{isin:r}=e,{period:o}=e,{now:i}=e;return t.$$set=t=>{"isin"in t&&n(0,r=t.isin),"period"in t&&n(1,o=t.period),"now"in t&&n(2,i=t.now)},[r,o,i]}class ho extends tt{constructor(t){super(),K(this,t,fo,lo,i,{isin:0,period:1,now:2})}}function go(t){let e,n;const r=t[1].default,o=function(t,e,n,r){if(t){const o=s(t,e,n,r);return t[0](o)}}(r,t,t[0],null);return{c(){e=h("div"),o&&o.c(),w(e,"class","placeholder svelte-688x34")},m(t,r){c(t,e,r),o&&o.m(e,null),n=!0},p(t,[e]){o&&o.p&&1&e&&a(o,r,t,t[0],e,null,null)},i(t){n||(P(o,t),n=!0)},o(t){B(o,t),n=!1},d(t){t&&l(e),o&&o.d(t)}}}function po(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}class mo extends tt{constructor(t){super(),K(this,t,po,go,i,{})}}function vo(t){let e,n;return e=new mo({props:{$$slots:{default:[yo]},$$scope:{ctx:t}}}),{c(){X(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function wo(e){let n,r,o,i,s,a;return{c(){n=h("span"),r=g(e[1]),o=p(),i=h("span"),s=g(e[2]),a=g("%"),w(n,"class","average svelte-1rueaja"),w(n,"title","Aktueller Wert"),w(i,"class","delta svelte-1rueaja"),w(i,"title","Aktuelles Tagesdelta"),S(i,"falling",e[2]<0),S(i,"rising",e[2]>0)},m(t,e){c(t,n,e),u(n,r),c(t,o,e),c(t,i,e),u(i,s),u(i,a)},p(t,e){2&e&&y(r,t[1]),4&e&&y(s,t[2]),4&e&&S(i,"falling",t[2]<0),4&e&&S(i,"rising",t[2]>0)},i:t,o:t,d(t){t&&l(n),t&&l(o),t&&l(i)}}}function yo(t){let e,n,r;return{c(){e=h("span"),e.textContent="4.1775",n=p(),r=h("span"),r.textContent="-4,12%",w(e,"class","average svelte-1rueaja"),w(r,"class","delta svelte-1rueaja")},m(t,o){c(t,e,o),c(t,n,o),c(t,r,o)},d(t){t&&l(e),t&&l(n),t&&l(r)}}}function bo(t){let e,n,r,o;const i=[wo,vo],s=[];function a(t,e){return t[0]?0:1}return n=a(t),r=s[n]=i[n](t),{c(){e=h("div"),r.c(),w(e,"class","details svelte-1rueaja")},m(t,r){c(t,e,r),s[n].m(e,null),o=!0},p(t,[o]){let u=n;n=a(t),n===u?s[n].p(t,o):(O(),B(s[u],1,1,(()=>{s[u]=null})),R(),r=s[n],r||(r=s[n]=i[n](t),r.c()),P(r,1),r.m(e,null))},i(t){o||(P(r),o=!0)},o(t){B(r),o=!1},d(t){t&&l(e),s[n].d()}}}function $o(t,e,n){let r,o,{data:i}=e;return t.$$set=t=>{"data"in t&&n(0,i=t.data)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=function(t){return t&&("string"==typeof t.last?parseFloat(t.last.replace(" ","").replace(",",".")):t.last)}(i)),1&t.$$.dirty&&n(2,o=et(i))},[i,r,o]}class ko extends tt{constructor(t){super(),K(this,t,$o,bo,i,{data:0})}}const{window:Mo}=V;function xo(t,e,n){const r=t.slice();return r[38]=e[n],r}function So(t,e,n){const r=t.slice();return r[41]=e[n][0],r[42]=e[n][1],r}function To(t){let e,n,r,o,i,s=t[42]+"";function a(...e){return t[23](t[41],...e)}return{c(){e=h("a"),n=g(s),r=p(),w(e,"class","dropdown-item button svelte-fjzsqs")},m(t,s){var l;c(t,e,s),u(e,n),u(e,r),o||(i=v(e,"click",(l=a,function(t){return t.preventDefault(),l.call(this,t)})),o=!0)},p(e,n){t=e},d(t){t&&l(e),o=!1,i()}}}function Do(t){let e,n,o,i,s,a,f,g,m,y=t[6]&&zo(t);return{c(){e=h("div"),n=h("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" class="svelte-fjzsqs"><path fill-rule="evenodd" fill="currentColor" d="M9.78 12.78a.75.75 0 01-1.06 0L4.47 8.53a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L6.06 8l3.72 3.72a.75.75 0 010 1.06z" class="svelte-fjzsqs"></path></svg> \n          ',o=h("button"),i=d("svg"),s=d("path"),f=p(),y&&y.c(),w(n,"class","svelte-fjzsqs"),w(s,"fill-rule","evenodd"),w(s,"fill","currentColor"),w(s,"d","M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"),w(s,"class","svelte-fjzsqs"),w(i,"xmlns","http://www.w3.org/2000/svg"),w(i,"viewBox","0 0 16 16"),w(i,"width","16"),w(i,"height","16"),w(i,"class","svelte-fjzsqs"),o.disabled=a=!t[6],w(o,"class","svelte-fjzsqs"),w(e,"class","section page svelte-fjzsqs")},m(r,a){c(r,e,a),u(e,n),u(e,o),u(o,i),u(i,s),u(e,f),y&&y.m(e,null),g||(m=[v(n,"click",t[25]),v(o,"click",t[26])],g=!0)},p(t,n){64&n[0]&&a!==(a=!t[6])&&(o.disabled=a),t[6]?y?y.p(t,n):(y=zo(t),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(t){t&&l(e),y&&y.d(),g=!1,r(m)}}}function zo(t){let e,n,r,o,i,s,a,f=t[12].getDate()+"",d=t[12].getMonth()+1+"",p=t[12].getFullYear()+"";return{c(){e=h("span"),n=g("End = "),r=g(f),o=g("/"),i=g(d),s=g("/"),a=g(p),w(e,"class","context-info svelte-fjzsqs")},m(t,l){c(t,e,l),u(e,n),u(e,r),u(e,o),u(e,i),u(e,s),u(e,a)},p(t,e){4096&e[0]&&f!==(f=t[12].getDate()+"")&&y(r,f),4096&e[0]&&d!==(d=t[12].getMonth()+1+"")&&y(i,d),4096&e[0]&&p!==(p=t[12].getFullYear()+"")&&y(a,p)},d(t){t&&l(e)}}}function qo(t){let e,n,r,o,i,s=t[13].length+"",a=t[1].length+"";return{c(){e=h("span"),n=g("Filtered = "),r=g(s),o=g("/"),i=g(a),w(e,"class","context-info svelte-fjzsqs")},m(t,s){c(t,e,s),u(e,n),u(e,r),u(e,o),u(e,i)},p(t,e){8192&e[0]&&s!==(s=t[13].length+"")&&y(r,s),2&e[0]&&a!==(a=t[1].length+"")&&y(i,a)},d(t){t&&l(e)}}}function Co(t){let e,n,r,o,i,s;function a(t,e){return(null==n||16416&e[0])&&(n=!!t[5].includes(t[38].isin)),n?No:jo}let u=a(t,[-1]),f=u(t);function d(...e){return t[32](t[38],...e)}return{c(){e=h("a"),f.c(),r=p(),o=h("span"),w(e,"class","button svelte-fjzsqs"),$(e,"padding",".3rem .1rem"),w(o,"class","spacer svelte-fjzsqs")},m(t,n){c(t,e,n),f.m(e,null),c(t,r,n),c(t,o,n),i||(s=v(e,"click",d),i=!0)},p(n,r){u!==(u=a(t=n,r))&&(f.d(1),f=u(t),f&&(f.c(),f.m(e,null)))},d(t){t&&l(e),f.d(),t&&l(r),t&&l(o),i=!1,s()}}}function jo(t){let e,n;return{c(){e=d("svg"),n=d("path"),w(n,"d","M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"),w(n,"class","svelte-fjzsqs"),w(e,"xmlns","http://www.w3.org/2000/svg"),$(e,"vertical-align","bottom"),w(e,"viewBox","0 0 16 16"),w(e,"width","16"),w(e,"height","16"),w(e,"class","svelte-fjzsqs")},m(t,r){c(t,e,r),u(e,n)},d(t){t&&l(e)}}}function No(t){let e,n;return{c(){e=d("svg"),n=d("path"),w(n,"d","M4.427 9.573l3.396-3.396a.25.25 0 01.354 0l3.396 3.396a.25.25 0 01-.177.427H4.604a.25.25 0 01-.177-.427z"),w(n,"class","svelte-fjzsqs"),w(e,"xmlns","http://www.w3.org/2000/svg"),$(e,"vertical-align","bottom"),w(e,"viewBox","0 0 16 16"),w(e,"width","16"),w(e,"height","16"),w(e,"class","svelte-fjzsqs")},m(t,r){c(t,e,r),u(e,n)},d(t){t&&l(e)}}}function Uo(t){let e,n,r,o,i,s,a,f,d,m,v,b,$=t[38].isin+"";const k=[Ao,Fo],M=[];function x(t,e){return t[0]?0:1}return n=x(t),r=M[n]=k[n](t),{c(){e=h("div"),r.c(),o=p(),i=h("div"),s=g("Data: "),a=h("a"),f=g("Tradegate"),m=g(",\n          ISIN: "),v=g($),w(e,"class","chart svelte-fjzsqs"),w(a,"href",d="https://www.tradegate.de/orderbuch.php?isin="+t[38].isin),w(a,"class","svelte-fjzsqs"),w(i,"class","credit svelte-fjzsqs")},m(t,r){c(t,e,r),M[n].m(e,null),c(t,o,r),c(t,i,r),u(i,s),u(i,a),u(a,f),u(i,m),u(i,v),b=!0},p(t,o){let i=n;n=x(t),n===i?M[n].p(t,o):(O(),B(M[i],1,1,(()=>{M[i]=null})),R(),r=M[n],r||(r=M[n]=k[n](t),r.c()),P(r,1),r.m(e,null)),(!b||16384&o[0]&&d!==(d="https://www.tradegate.de/orderbuch.php?isin="+t[38].isin))&&w(a,"href",d),(!b||16384&o[0])&&$!==($=t[38].isin+"")&&y(v,$)},i(t){b||(P(r),b=!0)},o(t){B(r),b=!1},d(t){t&&l(e),M[n].d(),t&&l(o),t&&l(i)}}}function Fo(t){let e,n;return e=new ho({props:{isin:t[38].isin,period:t[3],now:t[2]}}),{c(){X(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},p(t,n){const r={};16384&n[0]&&(r.isin=t[38].isin),8&n[0]&&(r.period=t[3]),4&n[0]&&(r.now=t[2]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Ao(t){let e,n;return e=new co({props:{isin:t[38].isin,period:t[3],end:t[12],quotesService:t[0],now:t[2]}}),{c(){X(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},p(t,n){const r={};16384&n[0]&&(r.isin=t[38].isin),8&n[0]&&(r.period=t[3]),4096&n[0]&&(r.end=t[12]),1&n[0]&&(r.quotesService=t[0]),4&n[0]&&(r.now=t[2]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Lo(t,e){let n,r,o,i,s,a,f,d,m,v,b,$,k,M,x,T,D,z,q,C,j,N,U,F,A,L=e[38].name+"",H=!e[5]||e[5].includes(e[38].isin);d=new ko({props:{data:e[38].data}});let Y=e[5]&&Co(e),_=H&&Uo(e);return{key:t,first:null,c(){n=h("div"),r=h("div"),o=h("h3"),i=h("a"),s=g(L),f=p(),X(d.$$.fragment),m=p(),v=h("div"),Y&&Y.c(),b=p(),$=h("a"),k=g("I"),x=p(),T=h("a"),D=g("K"),q=p(),C=h("a"),j=g("V"),U=p(),_&&_.c(),F=p(),w(i,"href",a=_o(e[38])),w(i,"class","svelte-fjzsqs"),w(o,"class","svelte-fjzsqs"),w($,"class","button svelte-fjzsqs"),w($,"title","Stock information"),w($,"href",M="https://www.dkb.de/kurse/portrait.html?isin="+e[38].isin),w($,"target","_blank"),w($,"rel","noreferrer noopener"),w(T,"class","button svelte-fjzsqs"),w(T,"title","Kaufen"),w(T,"href",z="https://www.dkb.de/-?$part=DkbTransactionBanking.content.brokerage.processes.SecurityOrder&$event=$pageflow-start&buy=true&wknIsin="+e[38].isin),w(T,"target","_blank"),w(T,"rel","noreferrer noopener"),w(C,"class","button svelte-fjzsqs"),w(C,"title","Verkaufen"),w(C,"href",N="https://www.dkb.de/-?$part=DkbTransactionBanking.content.brokerage.processes.SecurityOrder&$event=$pageflow-start&sell=true&wknIsin="+e[38].isin),w(C,"target","_blank"),w(C,"rel","noreferrer noopener"),w(v,"class","actions svelte-fjzsqs"),w(r,"class","stock-head svelte-fjzsqs"),w(n,"class","stock svelte-fjzsqs"),S(n,"expanded",e[5]&&e[5].includes(e[38].isin)),this.first=n},m(t,e){c(t,n,e),u(n,r),u(r,o),u(o,i),u(i,s),u(o,f),J(d,o,null),u(r,m),u(r,v),Y&&Y.m(v,null),u(v,b),u(v,$),u($,k),u(v,x),u(v,T),u(T,D),u(v,q),u(v,C),u(C,j),u(n,U),_&&_.m(n,null),u(n,F),A=!0},p(t,e){(!A||16384&e[0])&&L!==(L=t[38].name+"")&&y(s,L),(!A||16384&e[0]&&a!==(a=_o(t[38])))&&w(i,"href",a);const r={};16384&e[0]&&(r.data=t[38].data),d.$set(r),t[5]?Y?Y.p(t,e):(Y=Co(t),Y.c(),Y.m(v,b)):Y&&(Y.d(1),Y=null),(!A||16384&e[0]&&M!==(M="https://www.dkb.de/kurse/portrait.html?isin="+t[38].isin))&&w($,"href",M),(!A||16384&e[0]&&z!==(z="https://www.dkb.de/-?$part=DkbTransactionBanking.content.brokerage.processes.SecurityOrder&$event=$pageflow-start&buy=true&wknIsin="+t[38].isin))&&w(T,"href",z),(!A||16384&e[0]&&N!==(N="https://www.dkb.de/-?$part=DkbTransactionBanking.content.brokerage.processes.SecurityOrder&$event=$pageflow-start&sell=true&wknIsin="+t[38].isin))&&w(C,"href",N),16416&e[0]&&(H=!t[5]||t[5].includes(t[38].isin)),H?_?(_.p(t,e),16416&e[0]&&P(_,1)):(_=Uo(t),_.c(),P(_,1),_.m(n,F)):_&&(O(),B(_,1,1,(()=>{_=null})),R()),16416&e[0]&&S(n,"expanded",t[5]&&t[5].includes(t[38].isin))},i(t){A||(P(d.$$.fragment,t),P(_),A=!0)},o(t){B(d.$$.fragment,t),B(_),A=!1},d(t){t&&l(n),Q(d),Y&&Y.d(),_&&_.d()}}}function Ho(t){let e,n,o,i,s,a,d,m,$,k,M,x,T,D,z,q,C,j,N,U,F,A,L,H,Y=t[15][t[3]]+"",_=[],I=new Map,E=t[16],W=[];for(let e=0;e<E.length;e+=1)W[e]=To(So(t,E,e));let V=t[0]&&Do(t),X=t[4]&&qo(t),J=t[14];const Q=t=>t[38].isin;for(let e=0;e<J.length;e+=1){let n=xo(t,J,e),r=Q(n);I.set(r,_[e]=Lo(r,n))}return{c(){e=h("div"),n=h("div"),o=h("div"),i=h("div"),s=g(Y),a=p(),d=h("div");for(let t=0;t<W.length;t+=1)W[t].c();m=p(),V&&V.c(),$=p(),k=h("div"),M=p(),x=h("div"),T=h("button"),T.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" class="svelte-fjzsqs"><path fill="currentColor" fill-rule="evenodd" d="M6 2a.75.75 0 01.696.471L10 10.731l1.304-3.26A.75.75 0 0112 7h3.25a.75.75 0 010 1.5h-2.742l-1.812 4.528a.75.75 0 01-1.392 0L6 4.77 4.696 8.03A.75.75 0 014 8.5H.75a.75.75 0 010-1.5h2.742l1.812-4.529A.75.75 0 016 2z" class="svelte-fjzsqs"></path></svg>',D=p(),z=h("div"),q=h("button"),q.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" class="svelte-fjzsqs"><path fill="currentColor" fill-rule="evenodd" d="M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0114.25 14H1.75A1.75 1.75 0 010 12.25v-8.5zm1.75-.25a.25.25 0 00-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-8.5a.25.25 0 00-.25-.25H1.75zM3.5 6.25a.75.75 0 01.75-.75h7a.75.75 0 010 1.5h-7a.75.75 0 01-.75-.75zm.75 2.25a.75.75 0 000 1.5h4a.75.75 0 000-1.5h-4z" class="svelte-fjzsqs"></path></svg>',C=p(),j=h("div"),N=h("input"),X&&X.c(),U=p(),F=h("div");for(let t=0;t<_.length;t+=1)_[t].c();w(d,"class","dropdown-menu svelte-fjzsqs"),w(i,"class","section period button primary dropdown svelte-fjzsqs"),S(i,"open",t[11]),w(k,"class","section spacer svelte-fjzsqs"),w(T,"title","Toggle sort mode"),w(T,"class","svelte-fjzsqs"),w(x,"class","section sort-toggle svelte-fjzsqs"),S(x,"compact",!t[7]),w(q,"title","Toggle compact view mode"),w(q,"class","svelte-fjzsqs"),w(z,"class","section details-toggle svelte-fjzsqs"),S(z,"compact",t[5]),w(o,"class","outer-section svelte-fjzsqs"),w(N,"type","search"),w(N,"placeholder","Filter nach Name oder ISIN"),w(N,"class","svelte-fjzsqs"),w(j,"class","outer-section section filter svelte-fjzsqs"),w(n,"class","head svelte-fjzsqs"),w(e,"class","head-container svelte-fjzsqs"),S(e,"sticky",t[10]),w(F,"class","stocks svelte-fjzsqs"),S(F,"compact",t[5])},m(r,l){c(r,e,l),u(e,n),u(n,o),u(o,i),u(i,s),u(i,a),u(i,d);for(let t=0;t<W.length;t+=1)W[t].m(d,null);u(o,m),V&&V.m(o,null),u(o,$),u(o,k),u(o,M),u(o,x),u(x,T),u(o,D),u(o,z),u(z,q),u(n,C),u(n,j),u(j,N),b(N,t[4]),t[30](N),X&&X.m(j,null),t[31](e),c(r,U,l),c(r,F,l);for(let t=0;t<_.length;t+=1)_[t].m(F,null);var f;A=!0,L||(H=[v(Mo,"keydown",t[17]),v(Mo,"popstate",t[18]),v(Mo,"scroll",t[19]),v(Mo,"click",t[22]),v(i,"click",(f=t[24],function(t){return t.stopPropagation(),f.call(this,t)})),v(T,"click",t[27]),v(q,"click",t[28]),v(N,"input",t[29])],L=!0)},p(t,n){if((!A||8&n[0])&&Y!==(Y=t[15][t[3]]+"")&&y(s,Y),65544&n[0]){let e;for(E=t[16],e=0;e<E.length;e+=1){const r=So(t,E,e);W[e]?W[e].p(r,n):(W[e]=To(r),W[e].c(),W[e].m(d,null))}for(;e<W.length;e+=1)W[e].d(1);W.length=E.length}if(2048&n[0]&&S(i,"open",t[11]),t[0]?V?V.p(t,n):(V=Do(t),V.c(),V.m(o,$)):V&&(V.d(1),V=null),128&n[0]&&S(x,"compact",!t[7]),32&n[0]&&S(z,"compact",t[5]),16&n[0]&&b(N,t[4]),t[4]?X?X.p(t,n):(X=qo(t),X.c(),X.m(j,null)):X&&(X.d(1),X=null),1024&n[0]&&S(e,"sticky",t[10]),20525&n[0]){const e=t[14];O(),_=function(t,e,n,r,o,i,s,a,u,c,l,f){let h=t.length,d=i.length,g=h;const p={};for(;g--;)p[t[g].key]=g;const m=[],v=new Map,w=new Map;for(g=d;g--;){const t=f(o,i,g),a=n(t);let u=s.get(a);u?r&&u.p(t,e):(u=c(a,t),u.c()),v.set(a,m[g]=u),a in p&&w.set(a,Math.abs(g-p[a]))}const y=new Set,b=new Set;function $(t){P(t,1),t.m(a,l),s.set(t.key,t),l=t.first,d--}for(;h&&d;){const e=m[d-1],n=t[h-1],r=e.key,o=n.key;e===n?(l=e.first,h--,d--):v.has(o)?!s.has(r)||y.has(r)?$(e):b.has(o)?h--:w.get(r)>w.get(o)?(b.add(r),$(e)):(y.add(o),h--):(u(n,s),h--)}for(;h--;){const e=t[h];v.has(e.key)||u(e,s)}for(;d;)$(m[d-1]);return m}(_,n,Q,1,t,e,I,F,Z,Lo,null,xo),R()}32&n[0]&&S(F,"compact",t[5])},i(t){if(!A){for(let t=0;t<J.length;t+=1)P(_[t]);A=!0}},o(t){for(let t=0;t<_.length;t+=1)B(_[t]);A=!1},d(n){n&&l(e),f(W,n),V&&V.d(),t[30](null),X&&X.d(),t[31](null),n&&l(U),n&&l(F);for(let t=0;t<_.length;t+=1)_[t].d();L=!1,r(H)}}}function Yo(t,e){var n=t.name.toUpperCase(),r=e.name.toUpperCase();return n<r?-1:n>r?1:0}function _o(t){const e=window.location.href,n=new URL(e);return n.searchParams.set("filter",t.name.includes(",")?`"${t.name}"`:t.name),n.toString()}function Io(t,e,n){const r={intraday:"Intraday",woche:"Woche",monat:"Monat",monat6:"6 Monate",jahr:"Jahr"},o={intraday:864e5,woche:6048e5,monat:2592e6,monat6:15552e6,jahr:31536e6},i={intraday:1,woche:1e3,monat:1e3,monat6:1e3,jahr:1e3},s=Object.entries(r);let a,u,c,l,f,h,{quotesService:d=null}=e,{stocks:g}=e,{now:p}=e,m=0,v=!1;function w(t,e){return et(e.data)-et(t.data)}function y(){const t=new URL(window.location.href).searchParams,e=t.get("period"),o=t.get("expand-stocks");n(4,c=t.get("filter")||""),n(5,l=null!==o?o.split(/,/):null),n(3,u=r[e]&&e||"woche"),n(6,m=parseInt(t.get("page")||"0",10)),n(7,v=t.get("sort")),n(0,d=t.get("quotes-service")||d)}y();let b,$=!1;function k(t){n(6,m=Math.max(0,m+t))}z((()=>{b=h.offsetTop}));let M=!1;let x,S,T;return t.$$set=t=>{"quotesService"in t&&n(0,d=t.quotesService),"stocks"in t&&n(1,g=t.stocks),"now"in t&&n(21,p=t.now)},t.$$.update=()=>{if(72&t.$$.dirty[0]&&n(12,x=new Date(Date.now()-o[u]*m)),18&t.$$.dirty[0]&&n(13,S=function(t,e){if(!e)return t;const n=Array.from(e.matchAll(/(?:"([^"]*)(?:"|$)|([^,]*)),?/g),(t=>t[1]||t[2])).map((t=>t.trim().toLowerCase())).filter((t=>t)),r={};for(const e of n)for(const n of t){const{isin:t,name:o}=n;r[t]||(o.toLowerCase().includes(e)||e===t.toLowerCase())&&(r[t]=n)}return Object.values(r)}(g,c)),8320&t.$$.dirty[0]&&n(14,T=function(t,e){return t.slice().sort(e?w:Yo)}(S,v)),2097164&t.$$.dirty[0]){const t=Math.ceil(p/i[u])*i[u];a!==t&&(n(2,a=t),console.log("refresh",new Date(a)))}248&t.$$.dirty[0]&&function({filter:t,period:e,page:n,expandStocks:r,sort:o}){const i=window.location.href,s=new URL(i),a=s.searchParams;t?a.set("filter",t):a.delete("filter"),o?a.set("sort",!0):a.delete("sort"),r?a.set("expand-stocks",r.join(",")):a.delete("expand-stocks"),a.set("period",e),n?a.set("page",n):a.delete("page");const u=`${t?"Filtered Stocks="+t:"All stocks"} (period=${e}) - Stock Stats`,c=s.toString();i!==c&&(window.history.pushState({filter:t,period:e},u,c),document.title=u)}({filter:c,period:u,page:m,expandStocks:l,sort:v})},[d,g,a,u,c,l,m,v,f,h,$,M,x,S,T,r,s,function(t){"KeyF"==t.code&&t.ctrlKey&&(f.focus(),f.select(),t.preventDefault(),t.stopPropagation())},y,function(){n(10,$=window.pageYOffset>b)},k,p,()=>{n(11,M=!1)},t=>n(3,u=t),()=>n(11,M=!M),()=>k(1),()=>k(-1),()=>n(7,v=!v),()=>n(5,l=l?null:[]),function(){c=this.value,n(4,c)},function(t){C[t?"unshift":"push"]((()=>{f=t,n(8,f)}))},function(t){C[t?"unshift":"push"]((()=>{h=t,n(9,h)}))},t=>n(5,l=l.includes(t.isin)?l.filter((e=>e!==t.isin)):l.concat(t.isin))]}class Eo extends tt{constructor(t){super(),K(this,t,Io,Ho,i,{quotesService:0,stocks:1,now:21},[-1,-1])}}function Oo(t){let e,n;return e=new Eo({props:{stocks:t[3]||t[0],quotesService:t[1],now:t[2]}}),{c(){X(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},p(t,[n]){const r={};9&n&&(r.stocks=t[3]||t[0]),2&n&&(r.quotesService=t[1]),4&n&&(r.now=t[2]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Ro(t,e,n){let r,{stocks:o}=e,{quotesService:i=null}=e,{now:s}=e;function a(t,e){return Promise.all(t.map((t=>{const{isin:e}=t;return function(t){return fetch("https://www.tradegate.de/refresh.php?isin="+t).then((t=>t.json()))}(e).then((t=>({isin:e,info:t})))}))).then((t=>t.reduce(((t,e)=>(t[e.isin]=e.info,t)),{})))}return t.$$set=t=>{"stocks"in t&&n(0,o=t.stocks),"quotesService"in t&&n(1,i=t.quotesService),"now"in t&&n(2,s=t.now)},t.$$.update=()=>{5&t.$$.dirty&&a(o).then((t=>n(3,r=o.map((e=>({...e,data:t[e.isin]}))))))},[o,i,s,r]}class Po extends tt{constructor(t){super(),K(this,t,Ro,Oo,i,{stocks:0,quotesService:1,now:2})}}function Bo(t){let e,n;return e=new Po({props:{stocks:t[0],quotesService:t[1],now:t[2]}}),{c(){X(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.stocks=t[0]),2&n&&(r.quotesService=t[1]),4&n&&(r.now=t[2]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Wo(t){let e,n;return e=new ht({props:{onStocksLoaded:t[7]}}),{c(){X(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.onStocksLoaded=t[7]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Vo(t){let e,n,o,i,s,a;const u=[Wo,Bo],f=[];function d(t,e){return t[0]?1:0}return n=d(t),o=f[n]=u[n](t),{c(){e=h("main"),o.c()},m(r,o){c(r,e,o),f[n].m(e,null),i=!0,s||(a=[v(window,"focus",t[5]),v(window,"blur",t[6])],s=!0)},p(t,[r]){let i=n;n=d(t),n===i?f[n].p(t,r):(O(),B(f[i],1,1,(()=>{f[i]=null})),R(),o=f[n],o||(o=f[n]=u[n](t),o.c()),P(o,1),o.m(e,null))},i(t){i||(P(o),i=!0)},o(t){B(o),i=!1},d(t){t&&l(e),f[n].d(),s=!1,r(a)}}}function Zo(t,e,n){let r,{quotesService:o}=e,{stocks:i=null}=e,s=Date.now();function a(){n(2,s=Date.now())}function u(){Date.now()-3e4>s&&a(),r=setInterval(a,3e4)}function c(){clearInterval(r)}var l;z(u),l=c,D().$$.on_destroy.push(l);return t.$$set=t=>{"quotesService"in t&&n(1,o=t.quotesService),"stocks"in t&&n(0,i=t.stocks)},[i,o,s,u,c,()=>u(),()=>c(),t=>n(0,i=t)]}const Xo=window.__StockStatsCfg||null;return new class extends tt{constructor(t){super(),K(this,t,Zo,Vo,i,{quotesService:1,stocks:0})}}({target:document.body,props:{stocks:Xo&&Xo.stocks,quotesService:Xo&&Xo.quotesService}})}();
//# sourceMappingURL=bundle.js.map
